_format_version: "3.0"
_transform: true

services:
  # BACKEND SERVICES 
  - name: auth-service
    url: http://auth-service:4001
    routes:
      - name: auth-api
        paths: ["/api/auth"]
        strip_path: true

  - name: courses-service
    url: http://courses-service:4002
    routes:
      - name: courses-api
        paths: ["/api/courses"]
        strip_path: true

  - name: enrollments-service
    url: http://enrollments-service:4003
    routes:
      - name: enrollments-api
        paths: ["/api/enrollments"]
        strip_path: true

  # PRIVATE FRONTEND  
  - name: private-frontend
    url: http://private-frontend:3000
    routes:
      # Assets estáticos do Next.js
      - name: private-assets
        paths: ["/private/_next/"]
        strip_path: false

      # Favicon
      - name: private-favicon
        paths: ["/private/favicon.ico"]
        strip_path: false

      # Página "Meus Cursos"
      - name: private-meus-cursos
        paths: ["/meus-cursos"]
        strip_path: false

      # Dashboard
      - name: private-dashboard
        paths: ["/dashboard"]
        strip_path: false

  # PUBLIC FRONTEND 
  - name: public-frontend
    url: http://public-frontend:3000
    routes:
      - name: public-assets
        paths: ["/_next/"]
        strip_path: false

      - name: public-favicon
        paths: ["/favicon.ico"]
        strip_path: false

      - name: public-courses
        paths: ["/courses"]
        strip_path: false

      - name: public-curso
        paths: ["/curso/"]
        strip_path: false  

      - name: public-register
        paths: ["/register"]
        strip_path: false

      - name: public-login
        paths: ["/login"]
        strip_path: false

      - name: public-root
        paths: ["/"]
        strip_path: false
